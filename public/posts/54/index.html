<!DOCTYPE html>
<html lang="zh-cn" >
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="" />
	
	
	
	<title>hexo博客安装PWA ｜ 长街短梦</title>
	
    
    
    <meta name="description" content="随着移动设备的普及，越来越多的人开始使用移动设备浏览网页。为了提高用户的体验，许多网站都已经实现了PWA（渐进式Web应用程序）功能。 安装hexo-pwa插件 在Hexo博客中，我们可以使用hexo-p" />
    

    
    
    <meta name="keywords" content="生活, 学习, 博客" />
    

	


    <link rel="shortcut icon" href="//localhost:1313/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/highlight.css" />


    <script src="//localhost:1313/js/jquery-3.5.1.min.js"></script>
    <script src="//localhost:1313/js/zozo.js"></script>
    <script src="//localhost:1313/js/view-image.js"></script>


    
    <script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>
    

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/archives">时间线</a>
            </li>
            
            <li>
                <a href="/memos">瞬间</a>
            </li>
            
            <li>
                <a href="/friend">友链</a>
            </li>
            
            <li>
                <a href="/links">友圈</a>
            </li>
            
            <li>
                <a href="/album">相册</a>
            </li>
            
            <li>
                <a href="/about">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="//localhost:1313/">
                    <span>长街短梦</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">偶尔顾影自怜，偶尔肆意开怀。</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/wangyunzi/" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://twitter.com/YunziWang/" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                <a hrel="alternate" type="application/rss+xml" href="https://wangyunzi.com/index.xml" title="rss"><i class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/54/'>hexo博客安装PWA</a></h2>
                        <span class="date">2023.04.06</span>
                    </div>
                    <div class="post_content markdown"><p>随着移动设备的普及，越来越多的人开始使用移动设备浏览网页。为了提高用户的体验，许多网站都已经实现了PWA（渐进式Web应用程序）功能。</p>
<h4 id="安装hexo-pwa插件">安装hexo-pwa插件</h4>
<p>在Hexo博客中，我们可以使用hexo-pwa插件来实现PWA功能。首先，我们需要在命令行中输入以下命令进行安装：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install hexo-pwa --save
</span></span></code></pre></div><p>注意：这一步我的博客安装之后会报错，所以我最后卸载的，但是很多教程都有些到这一步。</p>
<h4 id="安装hexo-service-worker插件">安装hexo-service-worker插件</h4>
<p>在终端输入下面代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">npm install hexo-service-worker --save
</span></span></code></pre></div><h4 id="配置manifestjson文件">配置manifest.json文件</h4>
<p>PWA功能的核心是manifest.json文件。这个文件包含了应用程序的名称、图标、主题颜色等信息，浏览器可以根据这些信息来显示应用程序的图标，以及为其创建应用快捷方式。</p>
<p>在这个文件中，我们需要指定应用程序的各种信息
我们可以在Hexo博客的根目录中创建一个新的文件夹<code>source/</code>，并在其中创建一个名为<code>manifest.json</code>的文件。
同样可以直接通过工具生成，推荐该网站：<a href="https://www.simicart.com/manifest-generator.html/">Need help building your headless eCommerce storefront?</a>。
<img src="https://blog.wangyunzi.com/2023/04/06/1680784854.png" alt="image.png"></p>
<p>下面是一个示例（我的示例）：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;theme_color&#34;: &#34;#f69435&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;background_color&#34;: &#34;#f69435&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;display&#34;: &#34;fullscreen&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;scope&#34;: &#34;/&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;start_url&#34;: &#34;/&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;name&#34;: &#34;\u957f\u8857\u77ed\u68a6&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;short_name&#34;: &#34;\u957f\u8857\u77ed\u68a6&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;description&#34;: &#34;\u6b64\u8def\u5c71\u9ad8\u8def\u8fdc\uff0c\u6211\u53ea\u5269\u53e3\u888b\u73ab\u7470\u4e00\u7bc7&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    &#34;icons&#34;: [
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;src&#34;: &#34;/img/icon-192x192.png&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;sizes&#34;: &#34;192x192&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;image/png&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;src&#34;: &#34;/img/icon-256x256.png&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;sizes&#34;: &#34;256x256&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;image/png&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;src&#34;: &#34;/img/icon-384x384.png&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;sizes&#34;: &#34;384x384&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;image/png&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;src&#34;: &#34;/img/icon-512x512.png&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;sizes&#34;: &#34;512x512&#34;,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;image/png&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>其中，<code>name</code>指定了应用程序的名称，<code>short_name</code>指定了应用程序的短名称，<code>icons</code>指定了应用程序的图标，<code>start_url</code>指定了应用程序的首页地址，<code>theme_color</code>指定了应用程序的主题颜色，<code>background_color</code>指定了应用程序的背景颜色，<code>display</code>指定了应用程序的展示方式。</p>
<h4 id="配置swjs文件">配置sw.js文件</h4>
<p>PWA功能还需要使用Service Worker（服务工作者）来实现离线缓存等功能。我们可以在Hexo博客的根目录中创建一个新的文件夹<code>source/sw.js</code>，并在其中创建一个名为<code>sw.js</code>的文件。在这个文件中，我们需要编写一些代码来实现离线缓存等功能。下面是一个示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">const</span> <span class="n">cacheName</span> <span class="o">=</span> <span class="s1">&#39;my-cache&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="bp">self</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">&#39;install&#39;</span><span class="p">,</span> <span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">event</span><span class="o">.</span><span class="n">waitUntil</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">caches</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">cacheName</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">cache</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">cache</span><span class="o">.</span><span class="n">addAll</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;/css/style.css&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;/js/script.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;/images/logo.png&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="bp">self</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">&#39;fetch&#39;</span><span class="p">,</span> <span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">event</span><span class="o">.</span><span class="n">respondWith</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">caches</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">response</span> <span class="o">||</span> <span class="n">fetch</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">request</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></div><p>其中，<code>cacheName</code>指定了缓存的名称，在<code>install</code>事件中，我们可以将需要缓存的资源添加到缓存中；在<code>fetch</code>事件中，我们可以从缓存中读取资源，如果缓存中没有需要的资源，则从网络上获取。</p>
<h4 id="部署博客并测试">部署博客并测试</h4>
<p>配置完成后，我们可以将博客部署到服务器上，并测试PWA功能是否正常工作。首先，在命令行中输入以下命令来生成静态页面：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 清理缓存 / 生成静态页面 / 本地预览</span>
</span></span><span class="line"><span class="cl">$ hexo clean <span class="o">&amp;&amp;</span> hexo g <span class="o">&amp;&amp;</span> hexo s
</span></span></code></pre></div><h4 id="参考文章">参考文章</h4>
<ol>
<li><a href="https://senorui.top/posts/bce7.html">Hexo博客适配并支持PWA</a></li>
<li><a href="https://jaryoung.com/2022/02/03/Add-PWA-to-hexo-in-fluid-theme/#">优化打开博客速度，给您的Hexo添加上PWA吧</a></li>
<li><a href="https://blog.naaln.com/2017/09/hexo-with-pwa/">让PWA支持HEXO</a></li>
<li><a href="https://hexo.fluid-dev.com/posts/hexo-pwa/">给 Hexo 博客添加 PWA 支持_</a></li>
<li><a href="http://syean.cn/2018/12/17/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEPWA/#%E5%AE%89%E8%A3%85hexo-pwa">Hexo博客配置PWA</a></li>
<li><a href="https://www.simicart.com/manifest-generator.html/">Need help building your headless eCommerce storefront?</a></li>
<li><a href="https://www.bboy.app/2020/01/11/%E8%AE%A9hexo%E6%94%AF%E6%8C%81pwa/">让hexo支持pwa</a></li>
<li><a href="https://www.mobaijun.com/posts/1630447354.html">【Hexo】hexo 博客添加到桌面应用程序</a></li>
</ol>
</div>
                                      
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="//localhost:1313/tags/hexo/">Hexo</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div id="disqus_thread"></div>
                <script>
                    

                    

                    (function() { 
                    var d = document, s = d.createElement('script');
                    s.src = 'https://wang-yun-zi.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <br />
    <br />
    <a href="https://www.foreverblog.cn/go.html" target="_blank"> <img src="https://img.foreverblog.cn/wormhole_4_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客"></a>
    <a href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往-友链接力"><img src="https://www.travellings.cn/assets/logo.gif" alt="开往-友链接力" width="120"></a>
    <br />
    <br />
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;">浙ICP备2022025879号</a>&nbsp; 
    Powered by <a href="https://gohugo.io/" target="_blank"><b>Hugo</b></a> with
    <a href="https://github.com/varkai/hugo-theme-zozo" target="_blank"><b>ZoZo</b></a>. 



<br />
<br />
 
    <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
    <script>
        var now = new Date(); 
        function createtime() { 
            var grt= new Date("05/10/2022 17:38:00");
            now.setTime(now.getTime()+250); 
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
            document.getElementById("timeDate").innerHTML = "小破站在风雨中飘摇了"+dnum+" 天 "; 
            document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
        } 
    setInterval("createtime()",250);
    </script>

<script>
    window.ViewImage && ViewImage.init('.content img');
</script>

    <div class="footer_slogan">
        <span>My spiritual home</span>
    </div>
</footer>
</body>

</html>