<!DOCTYPE html>
<html lang="zh-cn" >
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="王云子" />
	
	
	
	<title>docker项目记录 ｜ 长街短梦</title>
	
    
    
    <meta name="description" content="2024/4/17 问题再现 执行sudo docker compose up -d命令的时候出现这个报错： WARN[0000] /www/wwwroot/memos.wangyunzi.com/docker-compose.yml: `version` is obsolete 这个是说版本过期，因为最新版本的docker不支持版本这种（其实我也是因为一个报错才知道的，所以compose里面的代码第一样关于ve" />
    

    
    
    <meta name="keywords" content="生活, 学习, 博客" />
    

	
    
    <link rel="shortcut icon" href="//localhost:1313/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="//localhost:1313/css/highlight.css" />


    <script src="//localhost:1313/js/jquery-3.5.1.min.js"></script>
    <script src="//localhost:1313/js/zozo.js"></script>
    <script src="//localhost:1313/js/view-image.js"></script>


    
    <script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>
    
    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">首页</a>
            </li>
            
            <li>
                <a href="/posts">时间线</a>
            </li>
            
            <li>
                <a href="/memos">瞬间</a>
            </li>
            
            <li>
                <a href="/friend">友链</a>
            </li>
            
            <li>
                <a href="/links">友圈</a>
            </li>
            
            <li>
                <a href="/album">相册</a>
            </li>
            
            <li>
                <a href="/about">关于</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="//localhost:1313/">
                    <span>长街短梦</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">此行山高路远，我只剩口袋玫瑰一片</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/wangyunzi/" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://twitter.com/YunziWang/" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                <a href="//localhost:1313/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/113/'>docker项目记录</a></h2>
                        <span class="date">2024.04.15</span>
                    </div>
                    <div class="post_content markdown"><h3 id="2024417-问题再现">2024/4/17 问题再现</h3>
<p>  执行<code>sudo docker compose up -d</code>命令的时候出现这个报错：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">WARN</span><span class="p">[</span><span class="mi">0000</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">wwwroot</span><span class="o">/</span><span class="n">memos</span><span class="p">.</span><span class="n">wangyunzi</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="p">.</span><span class="n">yml</span><span class="p">:</span><span class="w"> </span><span class="o">`</span><span class="n">version</span><span class="o">`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">obsolete</span><span class="w"> 
</span></span></span></code></pre></div><p>  这个是说版本过期，因为最新版本的docker不支持版本这种（其实我也是因为一个报错才知道的，所以compose里面的代码第一样关于version可以注释掉的，等我找到这个GitHub网页在说）。</p>
<h3 id="2024416">2024/4/16</h3>
<p>  因为昨天关闭防火墙忘记重新打开了，所以今天的好多个docker安装项目都出现问题，评论通知收不到，freshrss导入不了文档，询问杜老师才知道“Docker是需要防火墙转发数据的”，所以记录一下自己的一个小失误。</p>
<h3 id="2024415">2024/4/15</h3>
<p>  最近因为买了服务器之后比较兴奋，把几个自己没有尝试的过的项目都安装了一遍，包括Alist、FreshRSS、Artalk、等，因为前面都是随意安装，比如docker一键安装之类的，所以导致文件夹部分比较混乱，加上自己不熟悉docker所以出现了很多bugs，比如因为没有提前关闭镜像导致升级新docker之后镜像一直删不掉，还有就是莫名奇妙删掉了好几个文档，统一docker安装方式，采用docker-compose方式，方便整理。因为这些项目都需要设置反代理，所以首先新建网站xxx.wangyunzi.com，这时候就会有一个网站目录，接下来所有的操作都会在这个网站目录下进行。</p>
<h4 id="docker升级步骤">docker升级步骤</h4>
<p>  直接参考这篇文章，<a href="https://weiliang-ms.github.io/wl-awesome/2.%E5%AE%B9%E5%99%A8/%E8%BF%90%E8%A1%8C%E6%97%B6/docker/%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA/%E4%B8%BB%E6%9C%BA%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/03%E6%9B%B4%E6%96%B0Docker%E5%88%B0%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC.html">更新docker到最新版本</a>，前面随便找了一篇教程安装docker就开始乱弄，教程如下</p>
<h5 id="老的教程">老的教程</h5>
<p>直接脚本安装，安装命令如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
</span></span></code></pre></div><h5 id="新教程">新教程</h5>
<ol>
<li>较旧的 Docker 版本称为 docker 或 docker-engine 。如果已安装这些程序，请卸载它们以及相关的依赖项。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo yum remove docker \
</span></span><span class="line"><span class="cl">                  docker-client \
</span></span><span class="line"><span class="cl">                  docker-client-latest \
</span></span><span class="line"><span class="cl">                  docker-common \
</span></span><span class="line"><span class="cl">                  docker-latest \
</span></span><span class="line"><span class="cl">                  docker-latest-logrotate \
</span></span><span class="line"><span class="cl">                  docker-logrotate \
</span></span><span class="line"><span class="cl">                  docker-engine
</span></span></code></pre></div><ol start="2">
<li>按照这个教程吧：<a href="https://www.runoob.com/docker/centos-docker-install.html">菜鸟教程</a></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">##检查docker版本
</span></span><span class="line"><span class="cl">docker version  
</span></span><span class="line"><span class="cl">#安装一些必要的系统工具
</span></span><span class="line"><span class="cl">yum -y install yum-utils device-mapper-persistent-data lvm2
</span></span><span class="line"><span class="cl">#添加软件源信息
</span></span><span class="line"><span class="cl">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span><span class="line"><span class="cl">#更新 yum 缓存
</span></span><span class="line"><span class="cl">yum makecache fast
</span></span><span class="line"><span class="cl">#安装docker-ce
</span></span><span class="line"><span class="cl">yum -y install docker-ce
</span></span><span class="line"><span class="cl"># 或更新
</span></span><span class="line"><span class="cl">yum -y update docker-ce
</span></span></code></pre></div><h4 id="alist安装">Alist安装</h4>
<ol>
<li>新建<code>docker-compose.yml</code>文件，输入下面的代码：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">version: &#39;3.3&#39;
</span></span><span class="line"><span class="cl">services:
</span></span><span class="line"><span class="cl">    alist:
</span></span><span class="line"><span class="cl">        image: &#39;xhofe/alist:latest&#39;
</span></span><span class="line"><span class="cl">        container_name: alist
</span></span><span class="line"><span class="cl">        volumes:
</span></span><span class="line"><span class="cl">            - &#39;/etc/alist:/opt/alist/data&#39;
</span></span><span class="line"><span class="cl">        ports:
</span></span><span class="line"><span class="cl">            - &#39;5244:5244&#39;
</span></span><span class="line"><span class="cl">        environment:
</span></span><span class="line"><span class="cl">            - PUID=0
</span></span><span class="line"><span class="cl">            - PGID=0
</span></span><span class="line"><span class="cl">            - UMASK=022
</span></span><span class="line"><span class="cl">        restart: unless-stopped
</span></span></code></pre></div><ol start="2">
<li>接着打开终端，输入下面代码部署：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo docker compose up -d
</span></span></code></pre></div><ol start="3">
<li>因为上面的那个代码alist路径不是保存到当前目录，所以我希望数据在我所熟悉的文件夹内，改之后${PWD}/alist发现报错，也不知道为什么${PWD}不是保存在当前路径，一直报错<code>WARN[0000] The &quot;PWD&quot; variable is not set. Defaulting to a blank string. </code>最后还是改成了下面的代码，根据这个<a href="https://stackoverflow.com/questions/41948232/docker-compose-wont-find-pwd-environment-variable">Docker compose won&rsquo;t find $PWD environment variable</a>找到了答案，话说真的好爱这个网站，什么问题都能在这上面找到答案：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># version: &#34;3.8&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">services:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  # Alist 的官方部署文档: https://alist-doc.nn.ci/en/docs/install/docker/
</span></span><span class="line"><span class="cl">  # docker run -d --restart=always -v /etc/alist:/opt/alist/data -p 5244:5244 --name=&#34;alist&#34; xhofe/alist:latest
</span></span><span class="line"><span class="cl">  alist:
</span></span><span class="line"><span class="cl">    image: xhofe/alist:latest
</span></span><span class="line"><span class="cl">    container_name: alist
</span></span><span class="line"><span class="cl">    ports:
</span></span><span class="line"><span class="cl">      - &#34;5244:5244&#34;
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    volumes:
</span></span><span class="line"><span class="cl">      - &#34;.:/opt/alist/data&#34;
</span></span></code></pre></div><h4 id="artalk安装">Artalk安装</h4>
<ol>
<li>新建<code>docker-compose.yml</code>文件，输入下面的代码：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">version: &#39;3.5&#39;
</span></span><span class="line"><span class="cl">services:
</span></span><span class="line"><span class="cl">  artalk:
</span></span><span class="line"><span class="cl">    container_name: artalk
</span></span><span class="line"><span class="cl">    image: artalk/artalk-go
</span></span><span class="line"><span class="cl">    restart: always
</span></span><span class="line"><span class="cl">    ports:
</span></span><span class="line"><span class="cl">      - 8080:23366
</span></span><span class="line"><span class="cl">    volumes:
</span></span><span class="line"><span class="cl">      - ./data:/data
</span></span></code></pre></div><ol start="2">
<li>执行命令创建容器：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></div><h4 id="freshrss安装">Freshrss安装</h4>
<ol>
<li>新建<code>docker-compose.yml</code>文件，输入下面的代码，记得更改自己的端口（我的是8282）：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">version</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">services</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">freshrss</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">image</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">/</span><span class="n">freshrss</span><span class="p">:</span><span class="n">latest</span>
</span></span><span class="line"><span class="cl">    <span class="n">container_name</span><span class="p">:</span> <span class="n">freshrss</span>
</span></span><span class="line"><span class="cl">    <span class="n">hostname</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="n">restart</span><span class="p">:</span> <span class="n">always</span>
</span></span><span class="line"><span class="cl">    <span class="n">ports</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="s1">&#39;8282:80&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">volumes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">data</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">FreshRSS</span><span class="o">/</span><span class="n">data</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">extensions</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">FreshRSS</span><span class="o">/</span><span class="n">extensions</span>
</span></span><span class="line"><span class="cl">    <span class="n">environment</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">CRON_MIN</span><span class="p">:</span> <span class="s1">&#39;*/20&#39;</span> <span class="c1"># 刷新频率</span>
</span></span><span class="line"><span class="cl">      <span class="n">TZ</span><span class="p">:</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span>
</span></span></code></pre></div><ol start="2">
<li>按道理说第二步应该执行命令创建镜像，但是按照这篇教程———<a href="https://liuyude.com/archives/break-out-information-cocoon-embrace-content-freedom-deploy-freshrss-in-ten-minutes-with-pagoda-panel-docker-compose-open-new-chapter-in-autonomous.html">突破信息茧房，拥抱内容自由：使用宝塔面板docker-compose十分钟极速部署FreshRSS，开启自主阅读新篇章</a>，按照他的操作也可以的。但是应该也可以一步创建命令执行：<code>docker-compose up -d</code>;</li>
<li>这过程中我找到一篇不错的教程——<a href="https://meta.appinn.net/t/topic/48598">shRSS如何持久化配置？</a>，这篇教程里的答案很有参考价值，做法就是创建文件后输入下面的代码：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">version</span><span class="p">:</span> <span class="s2">&#34;2.4&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">services</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">freshrss</span><span class="o">-</span><span class="n">db</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">image</span><span class="p">:</span> <span class="n">postgres</span><span class="p">:</span><span class="mi">15</span>
</span></span><span class="line"><span class="cl">    <span class="n">container_name</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">db</span>
</span></span><span class="line"><span class="cl">    <span class="n">hostname</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">db</span>
</span></span><span class="line"><span class="cl">    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
</span></span><span class="line"><span class="cl">    <span class="n">logging</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">options</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="n">m</span>
</span></span><span class="line"><span class="cl">    <span class="n">volumes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">freshrss</span><span class="o">-</span><span class="n">db</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span>
</span></span><span class="line"><span class="cl">    <span class="n">environment</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">POSTGRES_DB</span><span class="p">:</span> <span class="o">$</span><span class="p">{</span><span class="n">DB_BASE</span><span class="p">:</span><span class="o">-</span><span class="n">freshrss</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">POSTGRES_USER</span><span class="p">:</span> <span class="o">$</span><span class="p">{</span><span class="n">DB_USER</span><span class="p">:</span><span class="o">-</span><span class="n">freshrss</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="n">POSTGRES_PASSWORD</span><span class="p">:</span> <span class="o">$</span><span class="p">{</span><span class="n">DB_PASSWORD</span><span class="p">:</span><span class="o">-</span><span class="n">freshrss</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#command:</span>
</span></span><span class="line"><span class="cl">      <span class="c1"># Examples of PostgreSQL tuning.</span>
</span></span><span class="line"><span class="cl">      <span class="c1"># https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server</span>
</span></span><span class="line"><span class="cl">      <span class="c1"># When in doubt, skip and stick to default PostgreSQL settings.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#  - -c</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#  - shared_buffers=1GB</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#  - -c</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#  - work_mem=32MB</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">freshrss</span><span class="o">-</span><span class="n">app</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">image</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">/</span><span class="n">freshrss</span><span class="p">:</span><span class="n">latest</span>
</span></span><span class="line"><span class="cl">    <span class="n">container_name</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="n">hostname</span><span class="p">:</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
</span></span><span class="line"><span class="cl">    <span class="n">ports</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="s2">&#34;8080:80&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">depends_on</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="n">freshrss</span><span class="o">-</span><span class="n">db</span>
</span></span><span class="line"><span class="cl">    <span class="n">logging</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">options</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">10</span><span class="n">m</span>
</span></span><span class="line"><span class="cl">    <span class="n">volumes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">data</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">FreshRSS</span><span class="o">/</span><span class="n">data</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">extensions</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">FreshRSS</span><span class="o">/</span><span class="n">extensions</span>
</span></span><span class="line"><span class="cl">    <span class="n">environment</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="n">TZ</span><span class="p">:</span> <span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span>
</span></span><span class="line"><span class="cl">      <span class="n">CRON_MIN</span><span class="p">:</span> <span class="s1">&#39;*/45&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#  TRUSTED_PROXY: 172.16.0.1/12 192.168.0.1/16</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">volumes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">freshrss</span><span class="o">-</span><span class="n">db</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">extensions</span><span class="p">:</span>
</span></span></code></pre></div><p>然后执行：<code>sudo docker compose up -d</code></p>
<h4 id="memos安装">Memos安装</h4>
<p>新建<code>docker-compose.yml</code>文件，然后输入以下代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">version</span><span class="p">:</span> <span class="s2">&#34;3&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">services</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">memos</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">image</span><span class="p">:</span> <span class="n">neosmemo</span><span class="o">/</span><span class="n">memos</span><span class="p">:</span><span class="n">latest</span>
</span></span><span class="line"><span class="cl">    <span class="n">container_name</span><span class="p">:</span> <span class="n">memeos</span>
</span></span><span class="line"><span class="cl">    <span class="n">hostname</span><span class="p">:</span> <span class="n">memeos</span>
</span></span><span class="line"><span class="cl">    <span class="n">ports</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="s2">&#34;5230:5230&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">volumes</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="o">-</span> <span class="o">./</span><span class="n">memos</span><span class="o">/.</span><span class="n">memos</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">memos</span>
</span></span><span class="line"><span class="cl">    <span class="n">restart</span><span class="p">:</span> <span class="n">always</span>
</span></span></code></pre></div></div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="//localhost:1313/tags/docker/">docker</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div id="disqus_thread"></div>
                <script>
                    

                    

                    (function() { 
                    var d = document, s = d.createElement('script');
                    s.src = 'https://wang-yun-zi.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <br />
    <br />
    <a href="https://www.foreverblog.cn/go.html" target="_blank"> <img src="https://img.foreverblog.cn/wormhole_4_tp.gif" alt="" style="width:auto;height:32px;" title="穿梭虫洞-随机访问十年之约友链博客"></a>
    <a href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往-友链接力"><img src="https://www.travellings.cn/assets/logo.gif" alt="开往-友链接力" width="120"></a>
    <br />
    <br />
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;">浙ICP备2022025879号</a>&nbsp; 
    Powered by <a href="https://gohugo.io/" target="_blank"><b>Hugo</b></a> with
    <a href="https://github.com/varkai/hugo-theme-zozo" target="_blank"><b>ZoZo</b></a>. 



<br />
<br />
 
    <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
    <script>
        var now = new Date(); 
        function createtime() { 
            var grt= new Date("05/10/2022 17:38:00");
            now.setTime(now.getTime()+250); 
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
            document.getElementById("timeDate").innerHTML = "小破站在风雨中飘摇了"+dnum+" 天 "; 
            document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
        } 
    setInterval("createtime()",250);
    </script>

<script>
    window.ViewImage && ViewImage.init('.content img');
</script>

    <div class="footer_slogan">
        <span>My spiritual home</span>
    </div>
</footer>
</body>

</html>